# Markdown Toolkit 优化建议清单

记录时间：2026-02-26

## 最新进展（2026-02-26）

- 已实现「专注查看模式」：
  - 图表区域双击进入/退出专注模式
  - 工具栏 `Focus` 按钮进入/退出专注模式
  - 进入后自动适配视口，`Esc` 可退出
- 「适配视图能力」基础需求已满足（自动适配与窗口变化响应）。
- `Fit Width / Fit Page` 独立按钮作为后续增强项保留，不列入当前优先级。

## 高收益 / 低成本（优先）

1. **Mermaid 大文本稳定性与换行（紧急）**
   - 提升 Mermaid `maxTextSize` 上限，避免长文本直接失败
   - 保证节点/标签长文本自动换行（含中英文长词场景）
   - 渲染失败时，源码块也要可换行，避免阅读困难

2. **交互参数可配置**
   - 缩放步长、最小/最大倍率
   - 是否必须 `Ctrl/Cmd + 滚轮` 才触发缩放

3. **键盘可操作性**
   - `+ / - / 0`：放大、缩小、重置
   - 方向键：平移画布

## 中等成本（体验进阶）

4. **可视区域渲染**
   - 仅渲染当前可见图表
   - 优化大文档性能与滚动流畅度

5. **视角状态持久化**
   - 记住每个 Mermaid 图的缩放比例与滚动位置
   - 预览刷新后恢复用户视角

6. **增量重渲染**
   - 仅对变更的 Mermaid 代码块重渲染
   - 降低编辑时的抖动和重算成本

## 进阶功能（可选）

7. **导出与复制**
   - `Copy SVG` / `Export PNG` / `Copy Mermaid Source`

8. **错误面板增强**
   - 展示 Mermaid 错误位置（行号）
   - 支持一键跳转到源码位置

9. **主题联动**
   - 跟随 VS Code 主题自动切换 Mermaid 主题
   - 支持手动覆盖主题

## 建议的第一批实施组合

推荐先做：**1 + 2 + 4**  
理由：先止损「大文本不可用」，再推进参数化与大文档性能。
